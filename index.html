<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Cradley Heath Bowls Scoreboard - Rev 5.3</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <style>
        :root {
            --bg-main: #004400;
            --bg-panel: #006600;
            --bg-header: #003300;
            --text-main: #ffffff;
            --accent: #ffcc00;
            --danger: #ff4444;
            --button-bg: #008800;
            --button-bg-alt: #0055aa;
            --button-text: #ffffff;
            --border-color: #ffffff;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: Arial, Helvetica, sans-serif;
            background-color: #002200;
            color: var(--text-main);
            display: flex;
            justify-content: center;
            align-items: flex-start;
            min-height: 100vh;
        }

        /* ====== SCALING WRAPPER FOR TV / LARGE SCREENS ====== */
        .scoreboard-wrapper {
            width: 100%;
            display: flex;
            justify-content: center;
            padding: 10px;
        }

        .scoreboard-scale-container {
            transform-origin: top center;
            /* default: no scale on phones */
            transform: scale(1);
        }

        /* 4K and very large displays */
        @media (min-width: 2500px) {
            .scoreboard-scale-container {
                transform: scale(0.7);
            }
        }

        /* 1080pâ€“4K range */
        @media (min-width: 1600px) and (max-width: 2499px) {
            .scoreboard-scale-container {
                transform: scale(0.8);
            }
        }

        /* Smaller TVs / large laptops */
        @media (min-width: 1200px) and (max-width: 1599px) {
            .scoreboard-scale-container {
                transform: scale(0.9);
            }
        }

        /* Slightly wide tablets / small laptops */
        @media (min-width: 1000px) and (max-width: 1199px) {
            .scoreboard-scale-container {
                transform: scale(0.95);
            }
        }

        /* ====== MAIN LAYOUT ====== */

        .scoreboard-container {
            background-color: var(--bg-main);
            border: 4px solid var(--border-color);
            border-radius: 10px;
            padding: 10px;
            max-width: 1400px;
            width: 100%;
        }

        .header {
            background-color: var(--bg-header);
            padding: 10px;
            text-align: center;
            border-radius: 6px;
            margin-bottom: 10px;
        }

        .header h1 {
            font-size: 2rem;
            color: var(--accent);
        }

        .top-controls {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 10px;
            justify-content: space-between;
            align-items: center;
        }

        .top-controls-left,
        .top-controls-right {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            align-items: center;
        }

        .btn {
            background-color: var(--button-bg);
            color: var(--button-text);
            border: 2px solid var(--border-color);
            border-radius: 6px;
            padding: 6px 10px;
            font-size: 0.9rem;
            cursor: pointer;
            min-width: 80px;
            text-align: center;
        }

        .btn-alt {
            background-color: var(--button-bg-alt);
        }

        .btn-danger {
            background-color: var(--danger);
        }

        .btn:active {
            transform: scale(0.97);
        }

        .main-grid {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 10px;
        }

        .panel {
            background-color: var(--bg-panel);
            border-radius: 6px;
            padding: 10px;
            border: 2px solid var(--border-color);
        }

        .panel h2 {
            font-size: 1.2rem;
            margin-bottom: 8px;
            text-align: center;
            color: var(--accent);
        }

        .teams-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-bottom: 10px;
        }

        .team-box {
            background-color: #004d00;
            border-radius: 6px;
            padding: 8px;
            border: 2px solid var(--border-color);
        }

        .team-name {
            font-size: 1.1rem;
            font-weight: bold;
            text-align: center;
            margin-bottom: 5px;
        }

        .score-display {
            font-size: 2.5rem;
            text-align: center;
            margin-bottom: 5px;
        }

        .end-display {
            font-size: 1rem;
            text-align: center;
            margin-bottom: 5px;
        }

        .score-buttons {
            display: flex;
            justify-content: center;
            gap: 5px;
            flex-wrap: wrap;
        }

        .score-btn {
            min-width: 40px;
            padding: 4px 6px;
            font-size: 0.9rem;
        }

        .ends-row {
            display: flex;
            justify-content: space-between;
            gap: 10px;
            margin-bottom: 10px;
        }

        .ends-box {
            flex: 1;
            background-color: #004d00;
            border-radius: 6px;
            padding: 8px;
            border: 2px solid var(--border-color);
            text-align: center;
        }

        .ends-box span {
            display: block;
            font-size: 1rem;
        }

        .ends-box .value {
            font-size: 1.5rem;
            margin-top: 4px;
        }

        .info-row {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 10px;
        }

        .info-box {
            flex: 1;
            background-color: #004d00;
            border-radius: 6px;
            padding: 8px;
            border: 2px solid var(--border-color);
        }

        .info-box label {
            font-size: 0.9rem;
            display: block;
            margin-bottom: 4px;
        }

        .info-box input,
        .info-box select {
            width: 100%;
            padding: 4px;
            border-radius: 4px;
            border: 1px solid #ccc;
            font-size: 0.9rem;
        }

        .right-panel-section {
            margin-bottom: 10px;
        }

        .right-panel-section:last-child {
            margin-bottom: 0;
        }

        .summary-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.85rem;
        }

        .summary-table th,
        .summary-table td {
            border: 1px solid #ffffff;
            padding: 4px;
            text-align: center;
        }

        .summary-table th {
            background-color: #003300;
        }

        .highlight {
            background-color: #228822;
        }

        .footer-controls {
            margin-top: 10px;
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            justify-content: space-between;
            align-items: center;
        }

        .footer-left,
        .footer-right {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            align-items: center;
        }

        .status-text {
            font-size: 0.9rem;
        }

        /* TV MODE CLASS (kept same position for Exit button etc.) */
        .tv-mode .scoreboard-container {
            border-width: 6px;
        }

        .tv-mode .header h1 {
            font-size: 2.4rem;
        }

        .tv-mode .score-display {
            font-size: 3rem;
        }

        .tv-mode .team-name {
            font-size: 1.3rem;
        }

        .tv-mode .summary-table {
            font-size: 0.9rem;
        }

        /* Responsive tweaks for smaller devices */
        @media (max-width: 900px) {
            .main-grid {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 600px) {
            .header h1 {
                font-size: 1.6rem;
            }

            .score-display {
                font-size: 2rem;
            }

            .top-controls {
                flex-direction: column;
                align-items: flex-start;
            }

            .footer-controls {
                flex-direction: column;
                align-items: flex-start;
            }
        }
    </style>
</head>
<body>
<div class="scoreboard-wrapper">
    <div class="scoreboard-scale-container" id="scaleContainer">
        <div class="scoreboard-container" id="scoreboard">

            <div class="header">
                <h1>Cradley Heath Bowls Scoreboard</h1>
            </div>

            <div class="top-controls">
                <div class="top-controls-left">
                    <button class="btn btn-alt" id="tvModeBtn">TV Mode</button>
                    <button class="btn btn-danger" id="exitTvModeBtn">Exit TV Mode</button>
                    <button class="btn" id="resetBtn">Reset Match</button>
                </div>
                <div class="top-controls-right">
                    <span class="status-text" id="statusText">Ready</span>
                </div>
            </div>

            <div class="main-grid">
                <!-- LEFT PANEL -->
                <div class="panel">
                    <h2>Match Score</h2>

                    <div class="teams-row">
                        <div class="team-box" id="homeBox">
                            <div class="team-name" id="homeName">Home</div>
                            <div class="score-display" id="homeScore">0</div>
                            <div class="end-display">Ends: <span id="homeEnds">0</span></div>
                            <div class="score-buttons">
                                <button class="btn score-btn" data-team="home" data-score="1">+1</button>
                                <button class="btn score-btn" data-team="home" data-score="2">+2</button>
                                <button class="btn score-btn" data-team="home" data-score="3">+3</button>
                                <button class="btn score-btn" data-team="home" data-score="4">+4</button>
                                <button class="btn score-btn" data-team="home" data-score="-1">-1</button>
                            </div>
                        </div>

                        <div class="team-box" id="awayBox">
                            <div class="team-name" id="awayName">Away</div>
                            <div class="score-display" id="awayScore">0</div>
                            <div class="end-display">Ends: <span id="awayEnds">0</span></div>
                            <div class="score-buttons">
                                <button class="btn score-btn" data-team="away" data-score="1">+1</button>
                                <button class="btn score-btn" data-team="away" data-score="2">+2</button>
                                <button class="btn score-btn" data-team="away" data-score="3">+3</button>
                                <button class="btn score-btn" data-team="away" data-score="4">+4</button>
                                <button class="btn score-btn" data-team="away" data-score="-1">-1</button>
                            </div>
                        </div>
                    </div>

                    <div class="ends-row">
                        <div class="ends-box">
                            <span>Total Ends</span>
                            <span class="value" id="totalEnds">0</span>
                        </div>
                        <div class="ends-box">
                            <span>Current End</span>
                            <span class="value" id="currentEnd">0</span>
                        </div>
                    </div>

                    <div class="info-row">
                        <div class="info-box">
                            <label for="homeNameInput">Home Team Name</label>
                            <input type="text" id="homeNameInput" placeholder="Enter home team name">
                        </div>
                        <div class="info-box">
                            <label for="awayNameInput">Away Team Name</label>
                            <input type="text" id="awayNameInput" placeholder="Enter away team name">
                        </div>
                    </div>

                    <div class="info-row">
                        <div class="info-box">
                            <label for="competitionInput">Competition</label>
                            <input type="text" id="competitionInput" placeholder="League / Cup / Friendly">
                        </div>
                        <div class="info-box">
                            <label for="greenInput">Green / Rink</label>
                            <input type="text" id="greenInput" placeholder="e.g. A Green, Rink 3">
                        </div>
                    </div>
                </div>

                <!-- RIGHT PANEL -->
                <div class="panel">
                    <div class="right-panel-section">
                        <h2>Summary</h2>
                        <table class="summary-table" id="summaryTable">
                            <thead>
                            <tr>
                                <th>Team</th>
                                <th>Score</th>
                                <th>Ends</th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr id="homeSummaryRow">
                                <td id="homeSummaryName">Home</td>
                                <td id="homeSummaryScore">0</td>
                                <td id="homeSummaryEnds">0</td>
                            </tr>
                            <tr id="awaySummaryRow">
                                <td id="awaySummaryName">Away</td>
                                <td id="awaySummaryScore">0</td>
                                <td id="awaySummaryEnds">0</td>
                            </tr>
                            </tbody>
                        </table>
                    </div>

                    <div class="right-panel-section">
                        <h2>Match Info</h2>
                        <div class="info-box">
                            <label for="dateInput">Date</label>
                            <input type="date" id="dateInput">
                        </div>
                        <div class="info-box" style="margin-top: 6px;">
                            <label for="notesInput">Notes</label>
                            <input type="text" id="notesInput" placeholder="Any special notes">
                        </div>
                    </div>
                </div>
            </div>

            <div class="footer-controls">
                <div class="footer-left">
                    <button class="btn" id="prevEndBtn">Previous End</button>
                    <button class="btn" id="nextEndBtn">Next End</button>
                </div>
                <div class="footer-right">
                    <span class="status-text" id="winnerText">No winner yet</span>
                </div>
            </div>

        </div>
    </div>
</div>

<script>
    // Basic state
    let homeScore = 0;
    let awayScore = 0;
    let homeEnds = 0;
    let awayEnds = 0;
    let totalEnds = 0;
    let currentEnd = 0;

    const homeScoreEl = document.getElementById('homeScore');
    const awayScoreEl = document.getElementById('awayScore');
    const homeEndsEl = document.getElementById('homeEnds');
    const awayEndsEl = document.getElementById('awayEnds');
    const totalEndsEl = document.getElementById('totalEnds');
    const currentEndEl = document.getElementById('currentEnd');

    const homeNameEl = document.getElementById('homeName');
    const awayNameEl = document.getElementById('awayName');

    const homeNameInput = document.getElementById('homeNameInput');
    const awayNameInput = document.getElementById('awayNameInput');
    const competitionInput = document.getElementById('competitionInput');
    const greenInput = document.getElementById('greenInput');
    const dateInput = document.getElementById('dateInput');
    const notesInput = document.getElementById('notesInput');

    const homeSummaryRow = document.getElementById('homeSummaryRow');
    const awaySummaryRow = document.getElementById('awaySummaryRow');
    const homeSummaryName = document.getElementById('homeSummaryName');
    const awaySummaryName = document.getElementById('awaySummaryName');
    const homeSummaryScore = document.getElementById('homeSummaryScore');
    const awaySummaryScore = document.getElementById('awaySummaryScore');
    const homeSummaryEnds = document.getElementById('homeSummaryEnds');
    const awaySummaryEnds = document.getElementById('awaySummaryEnds');

    const statusText = document.getElementById('statusText');
    const winnerText = document.getElementById('winnerText');

    const tvModeBtn = document.getElementById('tvModeBtn');
    const exitTvModeBtn = document.getElementById('exitTvModeBtn');
    const resetBtn = document.getElementById('resetBtn');
    const prevEndBtn = document.getElementById('prevEndBtn');
    const nextEndBtn = document.getElementById('nextEndBtn');

    const scoreboard = document.getElementById('scoreboard');

    function updateDisplay() {
        homeScoreEl.textContent = homeScore;
        awayScoreEl.textContent = awayScore;
        homeEndsEl.textContent = homeEnds;
        awayEndsEl.textContent = awayEnds;
        totalEndsEl.textContent = totalEnds;
        currentEndEl.textContent = currentEnd;

        homeSummaryScore.textContent = homeScore;
        awaySummaryScore.textContent = awayScore;
        homeSummaryEnds.textContent = homeEnds;
        awaySummaryEnds.textContent = awayEnds;

        // Highlight winner
        homeSummaryRow.classList.remove('highlight');
        awaySummaryRow.classList.remove('highlight');

        if (homeScore > awayScore) {
            homeSummaryRow.classList.add('highlight');
            winnerText.textContent = (homeNameInput.value || 'Home') + ' leading';
        } else if (awayScore > homeScore) {
            awaySummaryRow.classList.add('highlight');
            winnerText.textContent = (awayNameInput.value || 'Away') + ' leading';
        } else if (homeScore === 0 && awayScore === 0) {
            winnerText.textContent = 'No winner yet';
        } else {
            winnerText.textContent = 'Scores level';
        }
    }

    function addScore(team, value) {
        if (team === 'home') {
            homeScore += value;
            if (homeScore < 0) homeScore = 0;
            if (value > 0) {
                homeEnds++;
                totalEnds++;
                currentEnd = totalEnds;
            }
        } else {
            awayScore += value;
            if (awayScore < 0) awayScore = 0;
            if (value > 0) {
                awayEnds++;
                totalEnds++;
                currentEnd = totalEnds;
            }
        }
        statusText.textContent = 'Score updated';
        updateDisplay();
    }

    document.querySelectorAll('.score-btn').forEach(btn => {
        btn.addEventListener('click', () => {
            const team = btn.getAttribute('data-team');
            const score = parseInt(btn.getAttribute('data-score'), 10);
            addScore(team, score);
        });
    });

    homeNameInput.addEventListener('input', () => {
        const name = homeNameInput.value || 'Home';
        homeNameEl.textContent = name;
        homeSummaryName.textContent = name;
    });

    awayNameInput.addEventListener('input', () => {
        const name = awayNameInput.value || 'Away';
        awayNameEl.textContent = name;
        awaySummaryName.textContent = name;
    });

    resetBtn.addEventListener('click', () => {
        if (!confirm('Reset the match?')) return;
        homeScore = 0;
        awayScore = 0;
        homeEnds = 0;
        awayEnds = 0;
        totalEnds = 0;
        currentEnd = 0;
        statusText.textContent = 'Match reset';
        winnerText.textContent = 'No winner yet';
        updateDisplay();
    });

    prevEndBtn.addEventListener('click', () => {
        if (currentEnd > 0) {
            currentEnd--;
            statusText.textContent = 'Viewing previous end';
            currentEndEl.textContent = currentEnd;
        }
    });

    nextEndBtn.addEventListener('click', () => {
        if (currentEnd < totalEnds) {
            currentEnd++;
            statusText.textContent = 'Viewing next end';
            currentEndEl.textContent = currentEnd;
        }
    });

    tvModeBtn.addEventListener('click', () => {
        document.body.classList.add('tv-mode');
        statusText.textContent = 'TV Mode ON';
    });

    exitTvModeBtn.addEventListener('click', () => {
        document.body.classList.remove('tv-mode');
        statusText.textContent = 'TV Mode OFF';
    });

    // Initial display
    updateDisplay();
</script>
</body>
</html>
